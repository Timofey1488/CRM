{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<div class="mt-8 mb-4">
    <h1 class="text-2xl font-semibold text-gray-700">Бизнес аналитика</h1>
    <hr class="border-b-2 border-gray-300 my-2 mb-10">

   <form method="GET">
        <button type="submit" name="period" value="day" class="toggle-button {% if request.GET.period == 'day' %}active{% endif %}">За день</button>
        <button type="submit" name="period" value="year" class="toggle-button {% if request.GET.period == 'year' %}active{% endif %}">За год</button>
   </form>
     <div>
        {% if request.GET.period == 'day' %}
            <!-- Блок с аналитикой за день -->
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-4">
                    <div class="bg-blue-200 shadow-md rounded-lg p-4">
                        <h2 class="text-lg font-semibold">Заказы сегодня</h2>
                        <p class="text-gray-600">Количество заказов: {{ orders_today_count }}</p>
                        <p class="text-gray-600">Выручка: {{ orders_today_revenue }}</p>
                    </div>
                    <div class="bg-green-200 shadow-md rounded-lg p-4">
                        <h2 class="text-lg font-semibold">Платежи клиентов сегодня</h2>
                        <p class="text-gray-600">Количество платежей: {{ payments_today_count }}</p>
                        <p class="text-gray-600">Сумма платежей: {{ payments_today_amount }}</p>
                    </div>
                    <div class="bg-yellow-200 shadow-md rounded-lg p-4">
                        <h2 class="text-lg font-semibold">Срочные</h2>
                        <p class="text-gray-600">Количество срочных заказов: {{ urgent_orders_count }}</p>
                    </div>
                    <div class="bg-pink-200 shadow-md rounded-lg p-4">
                        <h2 class="text-lg font-semibold">Просроченные</h2>
                        <p class="text-gray-600">Количество просроченных заказов: {{ overdue_orders_count }}</p>
                    </div>
                    <div class="bg-purple-200 shadow-md rounded-lg p-4">
                        <h2 class="text-lg font-semibold">Ждут оплаты</h2>
                        <p class="text-gray-600">Количество заказов, ожидающих оплаты: {{ awaiting_payment_orders_count }}</p>
                    </div>
            </div>
        {% elif request.GET.period == 'year' %}
            <!-- Блок с аналитикой за год -->
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-4">
                <div class="bg-blue-200 shadow-md rounded-lg p-4">
                    <h2 class="text-lg font-semibold">Заказы за год</h2>
                    <p class="text-gray-600">Количество заказов: {{ orders_year_count }}</p>
                    <p class="text-gray-600">Выручка: {{ orders_year_revenue }}</p>
                </div>
                <div class="bg-green-200 shadow-md rounded-lg p-4">
                    <h2 class="text-lg font-semibold">Платежи клиентов за год</h2>
                    <p class="text-gray-600">Количество платежей: {{ payments_year_count }}</p>
                    <p class="text-gray-600">Сумма платежей: {{ payments_year_amount }}</p>
                </div>
                <div class="bg-yellow-200 shadow-md rounded-lg p-4">
                    <h2 class="text-lg font-semibold">Срочные за год</h2>
                    <p class="text-gray-600">Количество срочных заказов: {{ urgent_orders_year_count }}</p>
                </div>
                <div class="bg-pink-200 shadow-md rounded-lg p-4">
                    <h2 class="text-lg font-semibold">Просроченные за год</h2>
                    <p class="text-gray-600">Количество просроченных заказов: {{ overdue_orders_year_count }}</p>
                </div>
                <div class="bg-purple-200 shadow-md rounded-lg p-4">
                    <h2 class="text-lg font-semibold">Ждут оплаты за год</h2>
                    <p class="text-gray-600">Количество заказов, ожидающих оплаты: {{ awaiting_payment_orders_year_count }}</p>
                </div>
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}

